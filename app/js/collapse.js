(function(e){function t(t,n){n=n||{};var r=this,i=n.query||"> :even";e.extend(r,{$el:t,options:n,sections:[],isAccordion:n.accordion||false,db:n.persist?jQueryCollapseStorage(t.get(0).id):false});r.states=r.db?r.db.read():[];r.$el.find(i).each(function(){new jQueryCollapseSection(e(this),r)});(function(t){r.$el.on("click","[data-collapse-summary]",e.proxy(r.handleClick,t));r.$el.bind("toggle close open",e.proxy(r.handleEvent,t))})(r)}function n(t,n){e.extend(this,{isOpen:false,$summary:t.attr("data-collapse-summary","").wrapInner('<a href="#"/>'),$details:t.next(),options:n.options,parent:n});n.sections.push(this);var r=n.states[this._index()];if(r===0){this.close(true)}else if(this.$summary.is(".open")||r===1){this.open(true)}}t.prototype={handleClick:function(t,n){var n=n||"toggle";t.preventDefault();var r=this.sections,i=r.length;while(i--){if(e.contains(r[i].$summary[0],t.target)){r[i][n]();break}}},handleEvent:function(e){if(e.target==this.$el.get(0))return this[e.type]();this.handleClick(e,e.type)},open:function(t){if(isFinite(t))return this.sections[t].open();e.each(this.sections,function(e,t){t.open()})},close:function(t){if(isFinite(t))return this.sections[t].close();e.each(this.sections,function(e,t){t.close()})},toggle:function(t){if(isFinite(t))return this.sections[t].toggle();e.each(this.sections,function(e,t){t.toggle()})}};n.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(e){this._changeState("close",e)},open:function(t){var n=this;if(n.options.accordion&&!t){e.each(n.parent.sections,function(e,t){t.close()})}n._changeState("open",t)},_index:function(){return e.inArray(this,this.parent.sections)},_changeState:function(t,n){var r=this;r.isOpen=t=="open";if(e.isFunction(r.options[t])&&!n){r.options[t].apply(r.$details)}else{r.$details[r.isOpen?"show":"hide"]()}r.$summary.toggleClass("open",t!="close");r.$details.attr("aria-hidden",t=="close");r.$summary.trigger(t=="open"?"opened":"closed",r);if(r.parent.db){r.parent.db.write(r._index(),r.isOpen)}}};e.fn.extend({collapse:function(n,r){var i=r?e("body").find("[data-collapse]"):e(this);return i.each(function(){var i=r?{}:n,s=e(this).attr("data-collapse")||"";e.each(s.split(" "),function(e,t){if(t)i[t]=true});new t(e(this),i)})}});e(function(){e.fn.collapse(false,true)});jQueryCollapse=t;jQueryCollapseSection=n})(window.jQuery)